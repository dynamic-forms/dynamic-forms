@import "@dynamic-forms/core/assets/scss/variables";
@import "@dynamic-forms/core/assets/scss/mixins";

$dynamic-form-errors-margin-top: null !default;

.dynamic-form-wrapper.bootstrap {
  .dynamic-form {
    margin: $dynamic-form-margin;

    $blue: $dynamic-form-blue;
    $red: $dynamic-form-red;

    $enable-rfs: false;

    $h1-font-size: 24px;
    $h2-font-size: 22px;
    $h3-font-size: 20px;

    $headings-font-weight: revert;
    $headings-line-height: revert;

    @import '~bootstrap/scss/functions';
    @import '~bootstrap/scss/variables';
    @import '~bootstrap/scss/mixins';
    @import '~bootstrap/scss/reboot';
    @import '~bootstrap/scss/accordion';
    @import '~bootstrap/scss/forms';
    @import '~bootstrap/scss/buttons';
    @import '~bootstrap/scss/button-group';
    @import '~bootstrap/scss/nav';
    @import '~bootstrap/scss/card';
    @import '~bootstrap/scss/modal';
            
    &.grid {
      .row {
        bs-dynamic-form-button,
        bs-dynamic-form-icon,
        bs-dynamic-form-modal,
        bs-dynamic-form-accordion,
        bs-dynamic-form-tabs {
          display: contents;
        }
      }
    }

    .dynamic-form-field-errors {
      &.invalid-feedback {
        display: block;
      }
    }

    .dynamic-form-field-hints.form-text {
      display: flex;
    
      .hint-spacer {
        flex: 1 0 1em;
      }
    }
  
    .dynamic-form-header {
      @include dynamic-form-flex-container(
        $width: 100%,
        $margin-top: $dynamic-form-header-margin-top,
        $margin-bottom: $dynamic-form-header-margin-bottom
      );

      .dynamic-form-label {
        @include dynamic-form-label(
          $font-size: $dynamic-form-label-font-size, 
          $font-weight: $dynamic-form-label-font-weight,
          $font-weight-bold: $dynamic-form-label-font-weight-bold
        );
      }

      .dynamic-form-toolbar {
        @include dynamic-form-toolbar(
          $flex: 1 1 0,
          $button-space: $dynamic-form-button-space
        );
      }
    }

    .dynamic-form-errors {
      @include dynamic-form-errors(
        $color: $dynamic-form-errors-color,
        $font-size: $dynamic-form-errors-font-size,
        $margin-top: $dynamic-form-errors-margin-top, 
        $margin-bottom: $dynamic-form-errors-margin-bottom
      );
    }

    .dynamic-form-footer {
      @include dynamic-form-footer(
        $margin-top: $dynamic-form-footer-margin-top,
        $margin-bottom: $dynamic-form-footer-margin-bottom,
        $button-space: $dynamic-form-button-space,
      );
    }

    .dynamic-form-group {
      &.hidden {
        display: none;
      }

      .dynamic-form-group-header {
        @include dynamic-form-flex-container(
          $width: 100%,
          $margin-top: 0, 
          $margin-bottom: 0.5rem,
          $align-items: center
        );

        .dynamic-form-group-label {
          @include dynamic-form-label(
            $font-weight: $dynamic-form-label-font-weight,
            $font-weight-bold: $dynamic-form-label-font-weight-bold
          );
        }
        
        .dynamic-form-group-toolbar {
          @include dynamic-form-toolbar(
            $flex: 1 1 0,
            $button-space: $dynamic-form-button-space
          );
        }
      }

      .dynamic-form-group-errors {
        @include dynamic-form-errors(
          $color: $dynamic-form-errors-color,
          $font-size: $dynamic-form-errors-font-size,
          $margin-top: $dynamic-form-errors-margin-top,  
          $margin-bottom: $dynamic-form-errors-margin-bottom
        );
      }

      .dynamic-form-group-footer {
        @include dynamic-form-footer(
          $margin-top: $dynamic-form-footer-margin-top,
          $margin-bottom: $dynamic-form-footer-margin-bottom,
          $button-space: $dynamic-form-button-space,
        );
      }
    }

    .dynamic-form-array {
      &.hidden {
        display: none;
      }

      .dynamic-form-array-header {
        @include dynamic-form-flex-container(
          $width: 100%,
          $margin-top: 0, 
          $margin-bottom: 0.5rem,
          $align-items: center
        );

        .dynamic-form-array-label {
          @include dynamic-form-label(
            $font-weight: $dynamic-form-label-font-weight,
            $font-weight-bold: $dynamic-form-label-font-weight-bold
          );
        }
        
        .dynamic-form-array-toolbar {
          @include dynamic-form-toolbar(
            $flex: 1 1 0,
            $button-space: $dynamic-form-button-space
          );
        }
      }
      
      .dynamic-form-array-errors {
        @include dynamic-form-errors(
          $color: $dynamic-form-errors-color,
          $font-size: $dynamic-form-errors-font-size, 
          $margin-top: $dynamic-form-errors-margin-top, 
          $margin-bottom: $dynamic-form-errors-margin-bottom
        );
      }

      .dynamic-form-array-footer {
        @include dynamic-form-footer(
          $margin-top: $dynamic-form-footer-margin-top,
          $margin-bottom: $dynamic-form-footer-margin-bottom,
          $button-space: $dynamic-form-button-space,
        );
      }
    }

    .dynamic-form-dictionary {
      &.hidden {
        display: none;
      }

      .dynamic-form-dictionary-header {
        @include dynamic-form-flex-container(
          $width: 100%,
          $margin-top: 0, 
          $margin-bottom: 0.5rem,
          $align-items: center
        );

        .dynamic-form-dictionary-label {
          @include dynamic-form-label(
            $font-weight: $dynamic-form-label-font-weight,
            $font-weight-bold: $dynamic-form-label-font-weight-bold
          );
        }
        
        .dynamic-form-dictionary-toolbar {
          @include dynamic-form-toolbar(
            $flex: 1 1 0,
            $button-space: $dynamic-form-button-space
          );
        }
      }
      
      .dynamic-form-dictionary-errors {
        @include dynamic-form-errors(
          $color: $dynamic-form-errors-color,
          $font-size: $dynamic-form-errors-font-size,
          $margin-top: $dynamic-form-errors-margin-top,  
          $margin-bottom: $dynamic-form-errors-margin-bottom
        );
      }

      .dynamic-form-dictionary-footer {
        @include dynamic-form-footer(
          $margin-top: $dynamic-form-footer-margin-top,
          $margin-bottom: $dynamic-form-footer-margin-bottom,
          $button-space: $dynamic-form-button-space,
        );
      }
    }

    .dynamic-form-control {
      margin-top: 10px;
      margin-bottom: 10px;

      &.hidden {
        display: none;
      }

      &.readonly {
        label {
          pointer-events: none;
        }

        input, select, textarea {
          pointer-events: none;
          background-color: $gray-200;
        }

        .form-check {
          label:before {
            pointer-events: none;
          }
          
          &.form-switch {
            .form-check-input {
              visibility: hidden;
            }
          }
        }
      }

      .btn-group.btn-group-toggle {
        display: block;

        .btn {
          &.disabled {
            pointer-events: none;
          }

          &.btn-outline-light {
            color: rgba(0, 0, 0);
            background-color: rgb(239, 240, 241);
            border-color: rgb(239, 240, 241);

            &:hover {
              background-color: rgb(229, 230, 231);
              border-color: rgb(229, 230, 231);  
            }

            &.disabled {
              color: rgba(0, 0, 0, 0.5);
              background-color: rgb(249, 250, 251);
              border-color: rgb(249, 250, 251);  
            }

            &.active {
              background-color: rgb(219, 220, 221);
              border-color: rgb(219, 220, 221);  
            }
          }
        }
      }
    }

    .dynamic-form-button {
      &.hidden {
        display: none;
      }
    }

    .dynamic-form-icon {
      height: 38px;
      padding: 0.375rem;

      &.hidden {
        display: none;
      }
    }

    .dynamic-form-modal {
      background-color: rgba(0, 0, 0, 0.32);
      
      &.modal {
        display: block;
      }

      .modal-header {
        display: flex;
        align-items: center;
        width: 100%;

        .modal-title {
          &.modal-title-bg {
            font-size: 22px;
            font-weight: bold;
          }

          &.modal-title-md {
            font-size: 20px;
            font-weight: bold;
          }

          &.modal-title-sm {
            font-size: 18px;
            font-weight: bold;
          }
        }

        .modal-toolbar {
          flex: 1 1 0;
          display: flex;
          flex-direction: row;
          justify-content: flex-end;

          dynamic-form-elements {
            display: contents;
          }

          button {
            margin-left: 10px;
            margin-right: 0px;
          }
        }
      }

      .modal-footer {
        &.content-end {
          justify-content: flex-end;
  
          button {
            margin-left: 10px;
            margin-right: 0px;
          }
        }
  
        button {
          margin-left: 0px;
          margin-right: 10px;
        }
      }
    }

    .dynamic-form-accordion {
      .accordion-header {
        cursor: pointer;
        
        &.disabled {
          cursor: default;
          pointer-events: none;
          opacity: 0.5;
        }
      }
    }
    
    .dynamic-form-tabs {
      .tab-pane {
        padding: 0 10px;
      }
    }
  }
}